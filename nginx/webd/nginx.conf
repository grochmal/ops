# main nginx configuration
# vi: set ft=nginx:
user             nginx nginx;
worker_processes 6;
pid              /run/nginx.pid;
lock_file        /run/nginx.lock;  # ignored
error_log        /var/log/nginx/error.log info;
pcre_jit         on;
timer_resolution 100ms;
include          /usr/share/nginx/modules/*.conf;

events {
    worker_connections 1024;
}

http {
    charset          utf-8;
    index            index.html index.htm index.txt;
    default_type     application/octet-stream;
    resolver         8.8.8.8 8.8.4.4;  # google
    resolver_timeout 7s;
    include          webd/http/mime-types.conf;
    include          webd/http/log.conf;
    include          webd/http/save-bandwidth.conf;

    server {
        listen      80 default_server;
        server_name _;
        return      301 http://www.grochmal.org;
    }

    include webd/upstream/*.conf;
    include webd/vhost/*.conf;
}

